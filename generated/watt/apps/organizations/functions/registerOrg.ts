// @generated by flusk-lang â€” DO NOT EDIT

import type { PlatformaticApp } from '@platformatic/db';
import type { FastifyRequest } from 'fastify';

export const registerOrg = async (
  platformatic: PlatformaticApp,
  request: FastifyRequest,
): Promise<unknown> => {
  // Validate: register-input
  const created = await platformatic.entities.organization.save({
    input: request.body as Record<string, unknown>,
  });
  const created = await platformatic.entities.orgMember.save({
    input: request.body as Record<string, unknown>,
  });
  // Emit event via request context
  (request.server as any).events?.emit('org-created', request.body);
  return { ok: true };
};
