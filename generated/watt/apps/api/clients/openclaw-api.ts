// @generated by flusk-lang â€” DO NOT EDIT

const BASE_URL = '${OPENCLAW_API_URL}';

const getToken = (): string => process.env.{OPENCLAW_API_KEY} ?? '';

const request = async (method: string, path: string, body?: unknown): Promise<unknown> => {
  const headers: Record<string, string> = { 'Content-Type': 'application/json' };
  headers['Authorization'] = `Bearer ${getToken()}`;
  const res = await fetch(`${BASE_URL}${path}`, {
    method,
    headers,
    ...(body ? { body: JSON.stringify(body) } : {}),
  });
  if (!res.ok) throw new Error(`${res.status} ${res.statusText}`);
  return res.json();
};

export const createGateway = (body: Record<string, unknown>): Promise<unknown> =>
  request('POST', '/api/gateways', body);

export const deleteGateway = (): Promise<unknown> =>
  request('DELETE', '/api/gateways/:id');

export const getStatus = (): Promise<unknown> =>
  request('GET', '/api/gateways/:id/status');

export const openclawApi = {
  createGateway,
  deleteGateway,
  getStatus,
};
