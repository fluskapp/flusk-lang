// @generated by flusk-lang logic compiler
import type { FastifyInstance, FastifyRequest, FastifyReply } from 'fastify';

interface CheckUsageSpikeInput {
  orgId: number;
  currentCount: number;
  averageCount: number;
}

export default async function checkUsageSpike(
  app: FastifyInstance,
  request: FastifyRequest,
  reply: FastifyReply,
  input: CheckUsageSpikeInput,
) {
  if ((input.average_count == 0)) {
    return reply.send(false);
  }
  const ratio = input.current_count / input.average_count;
  if ((ratio > 2)) {
    return reply.send(true);
  }
  return reply.send(false);
}
