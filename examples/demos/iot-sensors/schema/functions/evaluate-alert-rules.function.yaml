name: evaluateAlertRules
description: "Check if reading triggers alerts"
inputs:
  - name: sensorId
    type: string
  - name: value
    type: number
output:
  type: json
steps:
  - id: rules
    call: getAlertRules
    with:
      sensorId: "$sensorId"
  - id: triggered
    call: checkThresholds
    with:
      rules: "$rules"
      value: "$value"
  - id: result
    action: return
    source: $triggered
